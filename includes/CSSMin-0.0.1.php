<?php

class CSSMin {
    /**
     * Минифицирует CSS-код, удаляя комментарии и лишние пробелы.
     *
     * @param string $css Исходный CSS-код
     * @return string Минифицированный CSS-код
     */
    public static function minify($css) {
        // Удаление комментариев
        $css = preg_replace('!/\*[^*]*\*+([^/][^*]*\*+)*/!', '', $css);
        // Удаление пробелов вокруг символов {};,
        $css = preg_replace('/\s*([{};,])\s*/', '$1', $css);
        // Удаление пробелов вокруг двоеточий
        $css = preg_replace('/\s*:\s*/', ':', $css);
        // Удаление лишних пробелов и переносов строк
        $css = preg_replace('/\s+/', ' ', $css);
        // Удаление пробелов в начале и в конце строки
        $css = trim($css);
        // Удаление последней точки с запятой перед закрывающей скобкой
        $css = preg_replace('/;}/', '}', $css);
        return $css;
    }
}
